<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>BlueBox | Nikhil Kakade</title>
<meta name="keywords" content="Bluetooth, Bluetooth Audio Profiles">
<meta name="description" content="Bluetooth 4.0 audio transmitter receiver and Analog Audio switch for SmartDesk. Bluetooth Profiles used: A2DP,HFP,AVRCP,HSP,MAP,PBAP">
<meta name="author" content="">
<link rel="canonical" href="https://nikhil9237.github.io/nikhilkakade.github.io/projects/bluebox/">
<link crossorigin="anonymous" href="/nikhilkakade.github.io/assets/css/stylesheet.min.a72801f0f40a8d7f71aa1cafd1c2f2a993a1f26ca1cfd38fdba65d5b9b0f08a0.css" integrity="sha256-pygB8PQKjX9xqhyv0cLyqZOh8myhz9OP26ZdW5sPCKA=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/nikhilkakade.github.io/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js" integrity="sha256-uVus3DnjejMqn4g7Hni&#43;Srwf3KK8HyZB9V4809q9TWE="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://nikhil9237.github.io/nikhilkakade.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://nikhil9237.github.io/nikhilkakade.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://nikhil9237.github.io/nikhilkakade.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://nikhil9237.github.io/nikhilkakade.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://nikhil9237.github.io/nikhilkakade.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><link rel="stylesheet" href="/css/lightbox.min.css">
<meta property="og:title" content="BlueBox" />
<meta property="og:description" content="Bluetooth 4.0 audio transmitter receiver and Analog Audio switch for SmartDesk. Bluetooth Profiles used: A2DP,HFP,AVRCP,HSP,MAP,PBAP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://nikhil9237.github.io/nikhilkakade.github.io/projects/bluebox/" /><meta property="article:section" content="projects" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="BlueBox"/>
<meta name="twitter:description" content="Bluetooth 4.0 audio transmitter receiver and Analog Audio switch for SmartDesk. Bluetooth Profiles used: A2DP,HFP,AVRCP,HSP,MAP,PBAP"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Projects",
      "item": "https://nikhil9237.github.io/nikhilkakade.github.io/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "BlueBox",
      "item": "https://nikhil9237.github.io/nikhilkakade.github.io/projects/bluebox/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "BlueBox",
  "name": "BlueBox",
  "description": "Bluetooth 4.0 audio transmitter receiver and Analog Audio switch for SmartDesk. Bluetooth Profiles used: A2DP,HFP,AVRCP,HSP,MAP,PBAP",
  "keywords": [
    "Bluetooth", "Bluetooth Audio Profiles"
  ],
  "articleBody": " Designed For CEMTREX SMARTDESK Product Description BlueBox is designed to be used in the SmartDesk product. It is designed to connect the mobile phones and any wireless bluetooth earphone over the bluetooth to the SmartDesk and route the analog audio signal and mic signal to different audio output devices. It gives the features like calling, phonebook reading, SMS reading from the Smartdesk Bluebox Utiltiy. The Mic and Speaker analog audio signals can be routed to smartdesk speakers/bluetooth earphone/mobile phone. It works as center hub for swithcing all the analog audio signals.\nWorking Bluebox uses two audio bluetooth modules. One bluetooth module is used to connect with the mobile phone to control the features like calling, music control, phonebook and SMS checking. Another bluetooth module is used to connect with the bluetooth earphone. The module uses the below bluetooth audio profiles for the commnication with the mobile phone and earphone.\nAdvanced Audio Distribution Profile (A2DP) To stream the mobile phone audio to the speakers or bluetooth earphone connected to the bluebox. Audio/Video Remote Control Profile (AVRCP) To use the play/pause/stop commands of music player from bluebox utility. Hands-Free Profile (HFP) To use the desktopâ€™s mic/ bluetooth earphone mic for answering the call. Headset Profile (HSP) To ring, answer, a call, hang up and adjust the volume of mobile phone. Message Access Profile (MAP) To download the SMS from mobile phone to bluebox windows utility. Phone Book Access Profile (PBAP, PBA) To access the phonebook from the mobile phone and get the missed call, incoming calls and outgoing call history from mobile phone. The bluebox has Analog audio mux ICs to route all the audio data coming from bluetooth modules, desktop audio In/Out port and bluetooth earphone. All this controlling is done by a micronctoller. The microcontroller controlles the bluetooth module audio profiles using the UART commands and analog MUX controlled by a GPIO. The bluebox is connected to Smartdesk CPU over the USB cable for communication with the Windows bluebox utility using the USB to TTL bridge IC.\nA Windows utility is designed to control all the bluebox features like pairing the mobile/earphone,getting device status, dial/answer the calls,downloading phonebook,getting call history and reading SMS. PyQt toolkit is used to design the UI.\nBlueBox Features Bluebox can be connect upto two mobile devices smilutenously. Answer and make call using Smartdesk speakers or bluetooth earpods Stream audio from SmartDesk PC/ Mobile phone to earpods directly. Receive/End call from Earpod button Auto disconnection of PC audio stream during incomg/outgoing calls. Switch call audio stream between earpods and Smartdesk speakers. Download incoming, missed, outgoing call history of both mobiles. Uses clear voice capture technology (noise cancellation) for calling. Download phonebook of both mobiles. Read incoming SMS. Mobiles automatically connect to BlueBox when they are in range. PC Audio stream automatically switch to SmartPods when they get connected (its default setting. It can be changed if required). We can also control the switching manually using GUI. Mobile audio (songs) can be streamed to the SmartDesk speaker. In this case, PC audio stream will be disconnected. Easy pairing of any Bluetooth Earphone/SmartPods and any latest Smartphone to the smartdesk. Provision for getting notifications like; mobile connection, SmartPod connection, incoming call, etc. Main Components Bluetooth 4.0 Module BC127 Microcontroller (Atmega644P) USB to TTL IC (CP2102) Quad SPDT Audio Switch MAX4740 BlueBox Windows Utility BlueBox functionality in depth Video ",
  "wordCount" : "560",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://nikhil9237.github.io/nikhilkakade.github.io/projects/bluebox/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Nikhil Kakade",
    "logo": {
      "@type": "ImageObject",
      "url": "https://nikhil9237.github.io/nikhilkakade.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header sticky-header">
    <nav class="nav">
        <div class="logo">
            <a href="https://nikhil9237.github.io/nikhilkakade.github.io" accesskey="h" title="Nikhil Kakade (Alt + H)">Nikhil Kakade</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://nikhil9237.github.io/nikhilkakade.github.io/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://nikhil9237.github.io/nikhilkakade.github.io/blog" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://nikhil9237.github.io/nikhilkakade.github.io/products" title="Products">
                    <span>Products</span>
                </a>
            </li>
            <li>
                <a href="https://nikhil9237.github.io/nikhilkakade.github.io/projects" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://nikhil9237.github.io/nikhilkakade.github.io/tags" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://nikhil9237.github.io/nikhilkakade.github.io/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>


<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://nikhil9237.github.io/nikhilkakade.github.io">Home</a>&nbsp;Â»&nbsp;<a href="https://nikhil9237.github.io/nikhilkakade.github.io/projects/">Projects</a></div>
    <h1 class="post-title">
      BlueBox
    </h1>
    <div class="post-description">
      Bluetooth 4.0 audio transmitter receiver and Analog Audio switch for SmartDesk. Bluetooth Profiles used: A2DP,HFP,AVRCP,HSP,MAP,PBAP
    </div>
    <div class="post-meta">



</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">â€Ž Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#designed-for" aria-label="Designed For">Designed For</a><ul>
                        
                <li>
                    <a href="#cemtrex-smartdesk" aria-label="CEMTREX SMARTDESK">CEMTREX SMARTDESK</a></li></ul>
                </li>
                <li>
                    <a href="#product-description" aria-label="Product Description">Product Description</a></li>
                <li>
                    <a href="#working" aria-label="Working">Working</a></li>
                <li>
                    <a href="#bluebox-features" aria-label="BlueBox Features">BlueBox Features</a></li>
                <li>
                    <a href="#main-components" aria-label="Main Components">Main Components</a><ul>
                        
                <li>
                    <a href="#bluebox-windows-utility" aria-label="BlueBox Windows Utility">BlueBox Windows Utility</a></li>
                <li>
                    <a href="#bluebox-functionality-in-depth-video" aria-label="BlueBox functionality in depth Video">BlueBox functionality in depth Video</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><hr>
<h2 id="designed-for">Designed For<a hidden class="anchor" aria-hidden="true" href="#designed-for">#</a></h2>
<h3 id="cemtrex-smartdesk">CEMTREX SMARTDESK<a hidden class="anchor" aria-hidden="true" href="#cemtrex-smartdesk">#</a></h3>
<hr>
<h2 id="product-description">Product Description<a hidden class="anchor" aria-hidden="true" href="#product-description">#</a></h2>
<p>BlueBox is designed to be used in the <a href="https://nikhil9237.github.io/nikhilkakade.github.io/products/smartdesk/" title=" SmartDesk">SmartDesk</a> product. It is designed to connect the mobile phones and any wireless bluetooth earphone over the bluetooth to the SmartDesk and route the analog audio signal and mic signal to different audio output devices. It gives the features like calling, phonebook reading, SMS reading from the Smartdesk Bluebox Utiltiy. The Mic and Speaker analog audio signals can be routed to smartdesk speakers/bluetooth earphone/mobile phone. It works as center hub for swithcing all the analog audio signals.</p>
<h2 id="working">Working<a hidden class="anchor" aria-hidden="true" href="#working">#</a></h2>





<figure
  
  
  
  >
    <a 
      
        data-lightbox="image-/projects/bluebox/BLOCK DIAGRAM.jpg"
      
      
        href="https://nikhil9237.github.io/projects/bluebox/BLOCK%20DIAGRAM.jpg"
      
    
    >
  <img
      
        src="https://nikhil9237.github.io/projects/bluebox/BLOCK%20DIAGRAM.jpg"
      
        
        
         />
    </a>
  
  
</figure>


<p>Bluebox uses two audio bluetooth modules. One bluetooth module is used to connect with the mobile phone to control the features like calling, music control, phonebook and SMS checking. Another bluetooth module is used to connect with the bluetooth earphone. The module uses the below <a href="https://en.wikipedia.org/wiki/List_of_Bluetooth_profiles" target="_blank">bluetooth audio profiles</a> for the commnication with the mobile phone and earphone.</p>
<ul>
<li>Advanced Audio Distribution Profile <strong>(A2DP)</strong>
<ul>
<li>To stream the mobile phone audio to the speakers or bluetooth earphone connected to the bluebox.</li>
</ul>
</li>
<li>Audio/Video Remote Control Profile <strong>(AVRCP)</strong>
<ul>
<li>To use the play/pause/stop commands of music player from bluebox utility.</li>
</ul>
</li>
<li>Hands-Free Profile <strong>(HFP)</strong>
<ul>
<li>To use the desktop&rsquo;s mic/ bluetooth earphone mic for answering the call.</li>
</ul>
</li>
<li>Headset Profile <strong>(HSP)</strong>
<ul>
<li>To ring, answer, a call, hang up and adjust the volume of mobile phone.</li>
</ul>
</li>
<li>Message Access Profile <strong>(MAP)</strong>
<ul>
<li>To download the SMS from mobile phone to bluebox windows utility.</li>
</ul>
</li>
<li>Phone Book Access Profile <strong>(PBAP, PBA)</strong>
<ul>
<li>To access the phonebook from the mobile phone and get the missed call, incoming calls and outgoing call history from mobile phone.</li>
</ul>
</li>
</ul>
<p>The bluebox has Analog audio mux ICs to route all the audio data coming from bluetooth modules, desktop audio In/Out port and bluetooth earphone. All this controlling is done by a micronctoller. The microcontroller controlles the bluetooth module audio profiles using the UART commands and analog MUX controlled by a GPIO. The bluebox is connected to Smartdesk CPU over the USB cable for communication with the Windows bluebox utility using the USB to TTL bridge IC.</p>
<p>A Windows utility is designed to control all the bluebox features like pairing the mobile/earphone,getting device status, dial/answer the calls,downloading phonebook,getting call history and reading SMS. PyQt toolkit is used to design the UI.</p>
<hr>
<h2 id="bluebox-features">BlueBox Features<a hidden class="anchor" aria-hidden="true" href="#bluebox-features">#</a></h2>
<ul>
<li>Bluebox can be connect upto two mobile devices smilutenously.</li>
<li>Answer and make call using Smartdesk speakers or bluetooth earpods</li>
<li>Stream audio from SmartDesk PC/ Mobile phone to earpods directly.</li>
<li>Receive/End call from Earpod button</li>
<li>Auto disconnection of PC audio stream during incomg/outgoing calls.</li>
<li>Switch call audio stream between earpods and Smartdesk speakers.</li>
<li>Download incoming, missed, outgoing call history of both mobiles.</li>
<li>Uses clear voice capture technology (noise cancellation) for calling.</li>
<li>Download phonebook of both mobiles.</li>
<li>Read incoming SMS.</li>
<li>Mobiles automatically connect to BlueBox when they are in range.</li>
<li>PC Audio stream automatically switch to SmartPods when they get connected (its
default setting. It can be changed if required). We can also control the switching
manually using GUI.</li>
<li>Mobile audio (songs) can be streamed to the SmartDesk speaker. In this case, PC audio
stream will be disconnected.</li>
<li>Easy pairing of any Bluetooth Earphone/SmartPods and any latest Smartphone to the
smartdesk.</li>
<li>Provision for getting notifications like; mobile connection, SmartPod connection,
incoming call, etc.</li>
</ul>
<h2 id="main-components">Main Components<a hidden class="anchor" aria-hidden="true" href="#main-components">#</a></h2>
<ul>
<li>Bluetooth 4.0 Module <a href="https://source.sierrawireless.com/devices/wifi-bluetooth-modules/bc127/#sthash.OgyIibx3.dpbs" target="_blank">BC127</a></li>
<li>Microcontroller (Atmega644P)</li>
<li>USB to TTL IC (CP2102)</li>
<li>Quad SPDT Audio Switch <a href="https://www.analog.com/media/en/technical-documentation/data-sheets/max4740-max4740h.pdf" target="_blank">MAX4740</a></li>
</ul>
<h3 id="bluebox-windows-utility">BlueBox Windows Utility<a hidden class="anchor" aria-hidden="true" href="#bluebox-windows-utility">#</a></h3>
<h2 id="hahahugoshortcode-s3-hbhb">




<figure
  
  
  
  >
    <a 
      
        data-lightbox="image-/projects/bluebox/bluebox utility 1.jpg"
      
      
        href="https://nikhil9237.github.io/projects/bluebox/bluebox%20utility%201.jpg"
      
    
    >
  <img
      
        src="https://nikhil9237.github.io/projects/bluebox/bluebox%20utility%201.jpg"
      
        
        
         />
    </a>
  
  
</figure>







<figure
  
  
  
  >
    <a 
      
        data-lightbox="image-/projects/bluebox/bluebox utility 2.jpg"
      
      
        href="https://nikhil9237.github.io/projects/bluebox/bluebox%20utility%202.jpg"
      
    
    >
  <img
      
        src="https://nikhil9237.github.io/projects/bluebox/bluebox%20utility%202.jpg"
      
        
        
         />
    </a>
  
  
</figure>

</h2>
<h3 id="bluebox-functionality-in-depth-video">BlueBox functionality in depth Video<a hidden class="anchor" aria-hidden="true" href="#bluebox-functionality-in-depth-video">#</a></h3>

<div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
  <iframe src="https://www.youtube.com/embed/hxiM8jEaoEw" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video"></iframe>
</div>



  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://nikhil9237.github.io/nikhilkakade.github.io/tags/bluetooth/">Bluetooth</a></li>
      <li><a href="https://nikhil9237.github.io/nikhilkakade.github.io/tags/bluetooth-audio-profiles/">Bluetooth Audio Profiles</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://nikhil9237.github.io/nikhilkakade.github.io">Nikhil Kakade</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="/js/lightbox.min.js"></script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
